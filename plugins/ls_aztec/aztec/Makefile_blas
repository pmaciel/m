#====================================================================
COMM    = SERIAL
MACHINE = PC

#
# Fortran compiler
#
FC_PC           = fort77
FC_GENERIC      = f77
FC_SUN4         = f77-2.0.1
FC_SGI          = f77
FC_DEC          = f77
FC_SGIM4        = f77
FC_I860         = if77
FC_HP           = f77
FC_SUNMOS	= sif77
FC_NCUBE        = ncc
FC_SP2          = mpxlf

#
# Archive program
#
AR_PC           = ar
AR_GENERIC      = ar
AR_SUN4 	= ar
AR_SGI  	= ar
AR_DEC		= ar
AR_SGIM4 	= ar
AR_I860 	= ar860
AR_HP           = ar
AR_SUNMOS       = ar860
AR_NCUBE	= nar
AR_SP2          = ar

#
# Ranlib program
#
RNLIB_PC        = touch
RNLIB_GENERIC   = touch
RNLIB_SUN4      = ranlib
RNLIB_SGI       = touch
RNLIB_SGIM4     = touch
RNLIB_DEC       = touch
RNLIB_I860      = touch
RNLIB_HP        = touch
RNLIB_SUNMOS    = touch
RNLIB_NCUBE     = touch
RNLIB_SP2       = touch

#
# Compilation flags
#
FFLAGS_PC     = -O3
FFLAGS_GENERIC = -O
FFLAGS_SUN4   = -O2
FFLAGS_SGI    = $(CFLAGS_SGI)
FFLAGS_SGIM4  = $(CFLAGS_SGIM4)
FFLAGS_DEC    = $(CFLAGS_DEC)
FFLAGS_I860   = $(CFLAGS_I860)
FFLAGS_HP     = -O
FFLAGS_SUNMOS = $(CFLAGS_SUNMOS)
FFLAGS_NCUBE  = $(CFLAGS_NCUBE)
FFLAGS_SP2    = $(CFLAGS_SP2)

#
# Blas routines NOT supplied by vendor
#
BLAS_PC      = blas1.f  blas2.f blas3.f xerbla.f lsame.f
BLAS_GENERIC = blas1.f  blas2.f blas3.f xerbla.f lsame.f
BLAS_SUN4    = blas1.f  blas2.f blas3.f xerbla.f lsame.f
BLAS_SGI     = blas1.f  blas2.f blas3.f xerbla.f lsame.f
BLAS_SGIM4   = blas1.f  blas2.f blas3.f xerbla.f lsame.f
BLAS_DEC     = blas1.f  blas2.f blas3.f xerbla.f lsame.f
BLAS_I860    =
BLAS_HP      = blas1.f  blas2.f blas3.f xerbla.f lsame.f
BLAS_SUNMOS  =
BLAS_NCUBE   =          blas2.f blas3.f xerbla.f lsame.f
BLAS_SP2     = blas1.f  blas2.f blas3.f xerbla.f lsame.f

#!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
# No need to change the rest of this file when adding
# a new machine to the makefile
#
#!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

FC              = $(FC_$(MACHINE))
AR              = $(AR_$(MACHINE))
BLAS            = $(BLAS_$(MACHINE))
RNLIB           = $(RNLIB_$(MACHINE))
FFLAGS          = $(FFLAGS_$(MACHINE))

Y12M =   y12m.f			y12mae.f		y12maf.f \
	 y12mbe.f 		y12mbf.f 		y12mce.f \
	 y12mcf.f		y12mde.f		y12mdf.f \
	 y12mfe.f		y12mge.f		y12mhe.f \
	 y12cck.f


LA_SRC = la_dgetrf.f		la_dgetri.f		la_ilaenv.f \
	 la_dgetf2.f		la_dlaswp.f		la_dtrtri.f \
	 la_dtrti2.f		la_dgetrs.f		la_dgeco.f \
	 la_dgedi.f		la_dgefa.f		la_dpotf2.f \
	 la_dpotrf.f		la_dlamch.f		la_dlaic1.f

SRC_F = $(BLAS)

OBJ = 	$(SRC_F:.f=.o)

all: aztec


#####################################
# Define implicit compilation rules #
#####################################

%.o:%.f
	$(FC) $(FFLAGS) -c $<

# solver library

aztec: $(OBJ)
	@echo "Building library $(TARGET)"
	@rm -f libblas.a
	$(AR) ruv libblas.a $(OBJ)
	@$(RNLIB) libblas.a

clean:
	@echo "cleaning ..."
	/bin/rm -f $(OBJ)

