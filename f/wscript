#!/usr/bin/env python


def configure(ctx):
  pass


def build(ctx):

  # mitremassembler (from mitrem1) static library
  ctx.new_task_gen(
    features = 'cxx cstaticlib',
    target   = 'mitremassembler',
    includes = [
      '../mkernel/ext',  # for xmlParser
      'mitrem1/Projects/DatFileReader/include',
      'mitrem1/Projects/DatFileReader/src',
      'mitrem1/Projects/ElementMatrixAssembler/include',
      'mitrem1/Projects/ElementMatrixAssembler/src',
      'mitrem1/Projects/MITReM/include',
      'mitrem1/Projects/MITReM/src',
      'mitrem1/Projects/MathematicsPhysics/include',
      'mitrem1/Projects/MathematicsPhysics/src' ],
    source   = [
      'mitrem1/Projects/DatFileReader/src/DatFileReader.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/BoundaryElementContribution.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/BoundaryElementProps_1D.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/BoundaryElementProps_2D.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/BoundaryElementProps_3D.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/BoundaryElementProps.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/BoundaryElementTerm.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ConvectionTerm_1D_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ConvectionTerm_1D_N.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ConvectionTerm_2D_N.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ConvectionTerm_2D_N_Migration.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ConvectionTerm_3D_N.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ConvectionTerm_AX_N.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ConvectionTerm.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/DiffusionTerm_1D_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/DiffusionTerm_1D_MDC.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/DiffusionTerm_2D_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/DiffusionTerm_2D_MDC.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/DiffusionTerm_3D_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/DiffusionTerm_3D_MDC.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/DiffusionTerm_AX_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/DiffusionTerm_AX_MDC.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/DiffusionTerm.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElecReactionTerm_1D_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElecReactionTerm_1D_MDC.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElecReactionTerm_1D_Pointwise.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElecReactionTerm_2D_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElecReactionTerm_2D_MDC.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElecReactionTerm_2D_Pointwise.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElecReactionTerm_3D_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElecReactionTerm_3D_MDC.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElecReactionTerm_3D_Pointwise.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElecReactionTerm_AX_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElecReactionTerm_AX_MDC.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElecReactionTerm_AX_Pointwise.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElecReactionTerm.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElectrostaticsTerm_1D_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElectrostaticsTerm_1D_MDC.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElectrostaticsTerm_2D_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElectrostaticsTerm_2D_MDC.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElectrostaticsTerm_3D_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElectrostaticsTerm_3D_MDC.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElectrostaticsTerm_AX_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElectrostaticsTerm_AX_MDC.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElectrostaticsTerm.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElementContribution.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElementMatrixAssembler.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElementProps_1D.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElementProps_2D.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElementProps_3D.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElementProps.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/ElementTerm.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/GasReactionTerm_1D_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/GasReactionTerm_2D_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/GasReactionTerm_3D_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/GasReactionTerm_AX_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/GasReactionTerm.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/HomReactionTerm_1D_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/HomReactionTerm_1D_Galerkin_Diagonalized.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/HomReactionTerm_1D_MDC.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/HomReactionTerm_2D_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/HomReactionTerm_2D_Galerkin_Diagonalized.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/HomReactionTerm_2D_MDC.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/HomReactionTerm_3D_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/HomReactionTerm_3D_Galerkin_Diagonalized.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/HomReactionTerm_3D_MDC.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/HomReactionTerm_AX_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/HomReactionTerm_AX_Galerkin_Diagonalized.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/HomReactionTerm_AX_MDC.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/HomReactionTerm.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/MagneticTerm_2D_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/MagneticTerm_3D_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/MagneticTerm.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/MigrationTerm_1D_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/MigrationTerm_1D_ISG.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/MigrationTerm_1D_MDC.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/MigrationTerm_2D_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/MigrationTerm_2D_MDC.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/MigrationTerm_2D_N.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/MigrationTerm_3D_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/MigrationTerm_3D_MDC.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/MigrationTerm_AX_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/MigrationTerm_AX_MDC.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/MigrationTerm.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/Term.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/TimeTerm_1D_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/TimeTerm_1D_HCU.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/TimeTerm_1D_MDC.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/TimeTerm_2D_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/TimeTerm_2D_MDC.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/TimeTerm_3D_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/TimeTerm_3D_MDC.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/TimeTerm_AX_Galerkin.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/TimeTerm_AX_MDC.cpp',
      'mitrem1/Projects/ElementMatrixAssembler/src/TimeTerm.cpp',
      'mitrem1/Projects/MITReM/src/ElecReaction_BVads.cpp',
      'mitrem1/Projects/MITReM/src/ElecReaction_BV.cpp',
      'mitrem1/Projects/MITReM/src/ElecReaction.cpp',
      'mitrem1/Projects/MITReM/src/ElecReaction_Linear.cpp',
      'mitrem1/Projects/MITReM/src/Electrolyte.cpp',
      'mitrem1/Projects/MITReM/src/ElectrolyteModel.cpp',
      'mitrem1/Projects/MITReM/src/ElectrolyteModel_DH.cpp',
      'mitrem1/Projects/MITReM/src/ElectrolyteModel_Exponential.cpp',
      'mitrem1/Projects/MITReM/src/ElectrolyteModel_Ideal.cpp',
      'mitrem1/Projects/MITReM/src/ElectrolyteModel_MSA.cpp',
      'mitrem1/Projects/MITReM/src/ElectrolyteSolution.cpp',
      'mitrem1/Projects/MITReM/src/Electrostatics.cpp',
      'mitrem1/Projects/MITReM/src/Fitter.cpp',
      'mitrem1/Projects/MITReM/src/GasReaction.cpp',
      'mitrem1/Projects/MITReM/src/HomReaction.cpp',
      'mitrem1/Projects/MITReM/src/HomReactionFit.cpp',
      'mitrem1/Projects/MITReM/src/IonFit.cpp',
      'mitrem1/Projects/MITReM/src/MITReM.cpp',
      'mitrem1/Projects/MathematicsPhysics/src/MathematicsPhysics.cpp' ] )

  # f executable
  ctx.new_task_gen(
    features = 'cxx cprogram',
    target   = 'f',
    includes = [
      'src',
      '../mkernel',
      '../mkernel/ext',  # for xmlParser
      'mitrem1/Projects/DatFileReader/include',
      'mitrem1/Projects/DatFileReader/src',
      'mitrem1/Projects/ElementMatrixAssembler/include',
      'mitrem1/Projects/ElementMatrixAssembler/src',
      'mitrem1/Projects/MITReM/include',
      'mitrem1/Projects/MITReM/src',
      'mitrem1/Projects/MathematicsPhysics/include',
      'mitrem1/Projects/MathematicsPhysics/src' ],
    uselib   = ['MITREM'],
    uselib_local = ctx.env.m_mlibraries + ['mitremassembler'],
    rpath    = ctx.env['PREFIX'],
    source   = [
      'src/cellgeom.cpp',
      'src/common.cpp',
      'src/convection.cpp',
      'src/F1_function.cpp',
      'src/Gfunction.cpp',
      'src/Iboundary.cpp',
      'src/IJacobian_A.cpp',
      'src/IJacobian_N.cpp',
      'src/IJacobian_P.cpp',
      'src/IJacobian_scalar.cpp',
      'src/IJacobian_turb_coupled.cpp',
      'src/IJacobian_turb_uncoupled.cpp',
      'src/main.cpp',
      'src/massflux.cpp',
      'src/read_inlet_2D.cpp',
      'src/read_inlet_3D.cpp',
      'src/readsoltp.cpp',
      'src/readstart.cpp',
      'src/rescalc.cpp',
      'src/scacde.cpp',
      'src/turb_init.cpp',
      'src/turb_source_D.cpp',
      'src/turb_source_node.cpp',
      'src/turb_source_P.cpp',
      'src/turb_viscosity.cpp',
      'src/turb_wallbc.cpp',
      'src/turb_wfuncs.cpp',
      'src/Update_mitrem.cpp',
      'src/Update_temperature.cpp',
      'src/Update_turbulence_coupled.cpp',
      'src/Update_turbulence_sequential.cpp',
      'src/Update_turbulence_uncoupled.cpp',
      'src/utils.cpp',
      'src/viscous.cpp',
      'src/writeres.cpp',
      'src/writesoltp.cpp' ] )

